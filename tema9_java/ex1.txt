import java.io.*;
public class Main
{
	public static void main(String[] args) {
		File fisier = new File("angajati.txt");
		if(!fisier.exists()){
		    System.out.println("Fisierul angajati.txt nu exista");
		    return;
		}
		double salariu_mediu = 0;
		int nr_angajati = 0;
		String nume_angajat_max = "";
		int max_salariu = 0;
		try(
		    BufferedReader br = new BufferedReader(new FileReader(fisier));
		    BufferedWriter bwraport = new BufferedWriter(new FileWriter("raport_angajati.txt"))
		    ){
		        String linie;
		        while((linie = br.readLine()) != null){
		            String [] p = linie.split(" ");
		            String prenume = p[0];
		            String nume = p[1];
		            int salariu_angajat = Integer.parseInt(p[2]);
		            if( salariu_angajat > max_salariu){
		                max_salariu = salariu_angajat;
		                nume_angajat_max = prenume + " " + nume;
		            }
		            salariu_mediu += salariu_angajat;
		            nr_angajati++;
		            
		        }
		        double sal = salariu_mediu / nr_angajati;
		        bwraport.write("Numar angajati: " + nr_angajati);
		        bwraport.newLine();
		        bwraport.write("Salariul mediu: " + sal);
		        bwraport.newLine();
		        bwraport.write("Angajat cu salariu maxim: " + nume_angajat_max + ", salariul de: " + max_salariu);
		    }catch(IOException e){
		        System.out.println("Eroare la generarea raportului");
		        return;
		    } 
	    try(BufferedReader br = new BufferedReader(new FileReader(fisier));
	        BufferedWriter bwvenitpestemedie = new BufferedWriter(new FileWriter("venit_peste_medie.txt"))
	    ){
	        String linie;
	        while((linie = br.readLine()) != null){
	            String[] p = linie.split(" ");
	            String prenume = p[0];
	            String nume = p[1];
	            int salariu_angajat = Integer.parseInt(p[2]);
	            double salariu = salariu_mediu / nr_angajati;
	            if(salariu_angajat > salariu){
	                bwvenitpestemedie.write("Angajatul: " + nume + " " + prenume + " are salariul mai mare decat media, acesta fiind de: " +  salariu_angajat);
	                bwvenitpestemedie.newLine();
	            }
	        }
	    }catch(IOException e){
	        System.out.println("Eroare la generarea fisierului venit peste medie");
	        return;
	    }
	}
}
