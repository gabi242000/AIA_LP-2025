import java.util.Scanner;

public class Main {

    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);

        
        System.out.print("Introduceți dimensiunea matricii pătratice N: ");
        int n = scanner.nextInt();

        if (n <= 0) {
            System.out.println("Dimensiunea trebuie să fie un număr pozitiv.");
            return;
        }

        int[][] matrice = new int[n][n];

        
        System.out.println("Introduceți elementele matricii (" + n + "x" + n + "):");
        for (int i = 0; i < n; i++) {
            for (int j = 0; j < n; j++) {
                System.out.print("Matrice[" + i + "][" + j + "]: ");
                matrice[i][j] = scanner.nextInt();
            }
        }

        verificareMatriceMagicaPartial(matrice, n);
        scanner.close();
    }

    public static void verificareMatriceMagicaPartial(int[][] A, int n) {
       
        int k;
        if (n % 2 != 0) {
            k = n; 
        } else if (n > 1) {
            k = n - 1; 
        } else {
            
            k = n;
        }

        if (k == 0) {
            System.out.println("Matrice nemagică (dimensiune insuficientă)");
            return;
        }

       
        int start = (n - k) / 2;
        int end = start + k; 

        
        int targetSum = 0;
        for (int i = 0; i < k; i++) {
            targetSum += A[start + i][start + i]; 
        }

        
        int sumaComuna = targetSum;
        boolean esteMagicaPartial = true;

       
        for (int i = 0; i < k; i++) {
            int sumaLinie = 0;
            int sumaColoana = 0;

            for (int j = 0; j < k; j++) {
                sumaLinie += A[start + i][start + j];
                sumaColoana += A[start + j][start + i];
            }

            if (sumaLinie != targetSum || sumaColoana != targetSum) {
                esteMagicaPartial = false;
                break;
            }
        }

        
        if (esteMagicaPartial) {
            int sumaDiagonalaSecundara = 0;
            for (int i = 0; i < k; i++) {
                
                sumaDiagonalaSecundara += A[start + i][start + (k - 1 - i)];
            }

            if (sumaDiagonalaSecundara != targetSum) {
                esteMagicaPartial = false;
            }
        }

       
        System.out.println("\n--- Rezultat ---");
        System.out.println("Dimensiunea submatricei centrale impare (k): " + k + "x" + k);

        if (esteMagicaPartial) {
            System.out.println("Matrice magică parțial, Suma comună: " + sumaComuna);
        } else {
            System.out.println("Matrice nemagică");
        }
    }
}