package tema_9;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;

public class Ex2 {
    public static void main(String[] args) {

        File fisier = new File("temperaturi.txt");

        if (!fisier.exists()) {
            System.out.println("Fisierul temperaturi.txt nu exista.");
            return;
        }

        double suma = 0;
        double tempMin = Double.MAX_VALUE;
        double tempMax = Double.MIN_VALUE;
        int nrValori = 0;
        int nrSubZero = 0;

        try (BufferedReader br = new BufferedReader(new FileReader(fisier))) {
            String linie;

            while ((linie = br.readLine()) != null) {
                double temp = Double.parseDouble(linie);

                suma += temp;
                nrValori++;

                if (temp < tempMin)
                    tempMin = temp;

                if (temp > tempMax)
                    tempMax = temp;

                if (temp < 0)
                    nrSubZero++;
            }

        } catch (IOException | NumberFormatException e) {
            System.out.println("Eroare la citirea fisierului temperaturi.txt");
            return;
        }

        double tempMedie = suma / nrValori;

        try (
            BufferedReader br = new BufferedReader(new FileReader(fisier));
            FileWriter fw = new FileWriter("temp_sub_zero.txt")
        ) {
            String linie;

            while ((linie = br.readLine()) != null) {
                double temp = Double.parseDouble(linie);

                if (temp < 0) {
                    fw.write(temp + "\n");
                }
            }

        } catch (IOException | NumberFormatException e) {
            System.out.println("Eroare la scrierea fisierului temp_sub_zero.txt");
        }

        try (FileWriter fw = new FileWriter("raport_temperaturi.txt")) {
            fw.write("Temperatura medie: " + tempMedie + "\n");
            fw.write("Temperatura minima: " + tempMin + "\n");
            fw.write("Temperatura maxima: " + tempMax + "\n");
            fw.write("Numar valori sub 0Â°C: " + nrSubZero + "\n");

        } catch (IOException e) {
            System.out.println("Eroare la scrierea fisierului raport_temperaturi.txt");
        }

        System.out.println("Program finalizat cu succes.");
    }
}
